#!/usr/bin/env ruby

require 'rubygems'

require_relative '../lib/livetext'

def handle_lt3(src)
  abort "Unknown file extension" unless src =~ /.lt3$/
end

# Main

x = Livetext.new

case ARGV.first 
  when  "-v", "--version"
    puts "#{Livetext::VERSION}\n "
  when "-t", "--test"  # FIXME doesn't work - path problem
puts "bin: pwd = #{Dir.pwd}"
puts "bin: path = #{Path}"
    file = "#{Path}/../test/test.rb"
    cmd = "ruby #{file} cmdline"
    puts cmd
    system(cmd)
  when "--path"
    puts Path
  when "-s", "--stdin"
    src = STDIN.read
    x.process(src)
  when nil
    puts <<-EOF
    Usage: 
      livetext -v
      livetext --version
      livetext filename
    EOF
    puts
  when Object
    src = ARGV.first
    x.process_file(src)
end

